---
title: "Pokemon Status and Type"
subtitle: "Chi-Square Test of Association between variables Pokemon Status and Type"
author: "Jeremy Jian Zhi Chia (s3917515)"
date: "Last updated: `r format(Sys.time(), '%d %B, %Y')`"
output:
  slidy_presentation:
    font_adjustment: 0
    highlight: haddock
    mathjax: "default"
    df_print: paged
---

```{r setup, include=FALSE}
# Use this chunk to quietly load your pacakges

knitr::opts_chunk$set(
	fig.align = "center",
	message = FALSE,
	warning = FALSE
)
# Packages loaded in this chunk will not appear in the presentation. 

library(ggplot2) # Useful for creating plots
library(dplyr)  # Useful for data maipulation
library(knitr) # Useful for creating nice tables
library(summarytools)

```


# RPubs link information

- You must publish your presentation to RPubs (see [here](https://astral-theory-157510.appspot.com/secured/RBootcamp_Course_04.html#creating_an_r_markdown_document_in_r_studio)) and add this link to your presentation here.

- Rpubs link comes here: www.........

- This online version of the presentation will be used for marking. Failure to add your link will delay your feedback and risk late penalties.

# Introduction

- The following link will help you with creating R Markdown Slidy Presentations
- http://rmarkdown.rstudio.com/slidy_presentation_format.html
- Don't forget about [Bootcamp 4](https://astral-theory-157510.appspot.com/secured/RBootcamp_Course_04.html)
- A good introduction provides a brief background to the problem, defines important terms, and leads to a strong rationale.

- The purpose of this investigation is to investigate if there are any association between Pokemon Status and Pokemon Type.
- Pokemon Status gives the status of any given Pokemon, namely Normal, Mythical, Sub-Legendary or Legendary.
- This investigation will focus on the Pokemon statuses of Normal, Mythical, Sub-Legendary and Legendary and their associated types. Emphasis will be on Pokemon that are considered "rare" and "common".
- Each Pokemon has a type which determines its weaknesses/resistance to attacks. Some example types include Grass, Fire, Water, Psychic, Electric etc.


# Introduction Cont.

- Keep everything short and straight to the point. 
- Use bullet points to help minimise text.
- Add relevant images to make your presentation more appealing
- Remember, you have a maximum of 20 slides to fit everything in.
- Ensure each slide fits on one screen. The reader should not have to scroll down. 

- As I grew up watching Pokemon, playing Pokemon video games and collecting Pokemon cards, I thought it would be fun and reminiscent to choose this dataset and be able to apply statistical tests on it to gain some insights!
- It would also allow me to finally know with confidence whether a particular Pokemon type is more likely to be a rare Pokemon!


# Problem Statement

- State the overall problem/question driving the investigation
- Summarise how you will use statistics to solve the problem or answer your question.

- As all Pokemon are associated with a status and type, I'd like to find out if there exists a relationship between the status and type.
- Will knowing the Pokemon type allow us to predict the Pokemon status, or will knowing the Pokemon status allow us to predict its type?
- Does any "rare" Pokemon make up of predominantly a certain Pokemon type?
- Does any particular Pokemon type have a significant number of Legendary Pokemons?
- The Chi-square Test of Association is used to test if there is a relationship between the Pokemon status and type.
- This test will allow us to know if the status and type are independent/dependent on each other and whether knowing the values of Pokemon status helps to predict the value of Pokemon type and vice versa.

# Data

- You can use multiple slides to break up your sections. 
- Explain how you collected your data.
- There should be enough detail here so that someone else could replicate your data collection.
- Explain the sampling method if known
- Ensure you reference the data source if you have used Open Data

- Complete Pokemon Dataset (All 8 generations)
- Source: https://www.kaggle.com/mariotormo/complete-pokemon-dataset-updated-090420
- This dataset contains records of Pokemons across all eight generations.


# Data Cont.

- List and explain the important variables. 
- If you have factors, explain each level.
- Explain the scale of numeric variables.
- Justify everything that you do to preprocess the data.

- This dataset contains rich information on each Pokemon, they include Pokemon names in various languages, primary and secondary type, height and weight, special abilities, various battle metrics (Attack, Defense, Speed etc.), egg type, gender distribution and various attack damage against any Pokemon Type.
- Variables of interest: Status and Type
- Values of the status variable were conditionally exchanged. With "Normal" Pokemons being classified as "Common" and "Legendary", "Mythical" and "Sub Legendary" Pokemons being classified as "Rare".
- The status and type variables were set as unordered factors.
- Unique values of variables of interest were inspected to ensure there are no errors.
- Existence of null values were also checked.

```{r}
# Categorising common and rare pokemons
rare_pokemons <- c("Legendary", "Mythical", "Sub Legendary")

for (i in rare_pokemons) {
  pokedex_Update_05_20_$status[pokedex_Update_05_20_$status == i] <- "Rare"
}

pokedex_Update_05_20_$status[pokedex_Update_05_20_$status == "Normal"] <- "Common"
```


```{r}
pokedex_Update_05_20_$status <- pokedex_Update_05_20_$status %>% as.factor()
pokedex_Update_05_20_$type_1 <- pokedex_Update_05_20_$type_1 %>% as.factor()
pokedex_Update_05_20_ %>% str()
```

```{r}
# Check for NAs
sum(is.na(pokedex_Update_05_20_$status))
sum(is.na(pokedex_Update_05_20_$type_1))
```


# Descriptive Statistics and Visualisation

- Summarise the important variables in your investigation.
- Use visualisation to highlight interesting features of the data and tell the overall story.
- Explain how you dealt with data issues (if any), e.g. missing data and outliers.
- Here are the examples of R chunks and outputs


- You can use the `knitr:kable` function to print nice HTML tables. Here is an example R code:

```{r}
table1 <- table(pokedex_Update_05_20_$type_1, pokedex_Update_05_20_$status)
knitr::kable(table1)
```
```{r}
table2 <- table(pokedex_Update_05_20_$type_1, pokedex_Update_05_20_$status) %>% prop.table(margin = 2)
knitr::kable(table2)
```


# Decsriptive Statistics Cont.

```{r}
ggplot(pokedex_Update_05_20_) +
  aes(x = type_1, fill = status) +
  geom_bar(position = "fill") +
  coord_flip() +
  labs(title = "Proportion of Pokemon Status for each Pokemon Type", x = "Type", y = "Proportion")
```
The above barplot displays the proportion of Pokemon status for each Pokemon Type. By observation, all Pokemon types are predominantly made up of "Common" Pokemons. With certain Pokemon types making up a larger proportion of "Rare" Pokemons.
The barplot gives an indication as to whether there is an association between the Pokemon type and status. If there was no association between Pokemon type and status, the proportions within the bars of each Pokemon type would be identical. However, the barplot above suggests the possibility of an association between the variables.

# Hypothesis Testing

- Apply an appropriate hypothesis test for your investigation. 
- Ensure you state and check any assumptions. 
- Report the appropriate values and interpret the results.
- Here is an example:

```{r}
# Running chi-square test on variables
pokemon_chi <- chisq.test(table(pokedex_Update_05_20_$type_1, pokedex_Update_05_20_$status))
pokemon_chi
```


```{r}
# View expected values
pokemon_chi$expected
```
Although the assumption of the Chi-squared test is that at least 75% of the expected value in each cell is greater than 5, there is evidently a clear majority of expected counts over 5. There are also many expected values less than 5 that sit close to the value 5. Therefore, the Chi-squared test will still be used to test for any association between Pokemon status and type.


```{r}
# Calculate degrees of freedom
dof <- (18-1)*(2-1)
dof
```
```{r}
# Calculate one-tailed critical value
qchisq(p = .95, df = 17)
```
The critical value was calculated as 27.59. As 89.65 > 27.59, the null hypothesis is rejected.
# Hypthesis Testing Cont.

```{r}
# Calculate P value
pchisq(q = 89.652, df = 17, lower.tail = F)
```
The reported p-value is 7.062e-12, which is less than the 0.05 significance level. Therefore, the null hypothesis is also rejected using the p-value approach.

- Here are the examples of mathematical equations:

$$H_0: \mu_1 = \mu_2 $$

$$H_A: \mu_1 \ne \mu_2$$

$$S = \sum^n_{i = 1}d^2_i$$

- You can also place equations inline: $z = \frac{x - \mu}{\sigma}$

```{r}
pokemon_fisher <- fisher.test(table(pokedex_Update_05_20_$type_1, pokedex_Update_05_20_$status), simulate.p.value = T, hybrid = T)
pokemon_fisher$p.value
```


# Discussion

- Discuss the major findings of your investigation
- Discuss any strengths and limitations. 
- Propose directions for future investigations. 
- This is a good place to re-state your findings as a final conclusion. What is the one take home message the reader should leave with?
- Your final conclusion needs to be very clear.


## Major Findings

### Chi-Squared Test

- There are two approaches used to test the null hypothesis within the Chi-squared test. First was the critical value approach and second is the p-value approach.
- The reported X-squared of Pokemon status and type is 89.652 and the reported critical value was found to be 27.587. As X-squared is higher than the critical value, 89.652 > 27.587, the null hypothesis is rejected.
- The reported p-value was found to be 7.061857e-12 which is less than the significance level of 0.05. Hence, the null hypothesis is rejected with this approach.

### Fisher's Exact Test

- The Fisher's Exact Test is used over the Chi-Squared Test when there exists over 20% of cells with expected frequencies of less than 5.
- As the Chi-Squared Test applies approximations, the Fisher's Exact Test is an exact test.
- The reported p-value using this test was 0.000499 which is also below the significance level of 0.05. Therefore, similar to the Chi-Squared Test, the null hypothesis is rejected.


## Strengths and Limitations

### Strengths

- The initial Pokemon statuses contained 4 levels, namely "Normal", "Legendary", "Mythical" and "Sub Legendary". However, the levels were combined to increase the number of observations within each subgroup of "Common" and "Rare".
- The gathering of subgroups was still done in a meaningful way. The Chi-Squared Test was able to provide a more accurate result without compromising the insights that can be gained. We can still determine if a particular Pokemon type is considered "Common" or "Rare".
- As this sample size is small and there existed expected frequencies that are below 5, the Fisher's Exact Test was able to provide an accurate result of the p-value.

### Limitations

- Even though gathering these observations increased the accuracy of the Chi-Squared Test, the insights gained were limited to only knowing whether a Pokemon particular Pokemon is "Common" or "Rare".
- As a result, we are not able to see into finer granularity as to whether Pokemon type was associated with one of the four statuses.

## Considerations for Future Investigations

- If there are more generations of Pokemons to come, this will result in a larger sample size. Instead of using a Chi-Squared Test or Fisher's Exact Test, a G-Test of Independence can be used to find any associations between Pokemon status and type.
- As this dataset is comprehensive, there are many more analyses that can be conducted. One interesting one would be to use an ANOVA (Analysis of Variance) to test whether a particular Pokemon type have equal heights.

## Final Conclusion
The Chi-Squared Test and Fisher's Exact Test of Association were used to test if the association between Pokemon status and type are statistically significant. The results from both tests showed that there exists a significant relationship between the Pokemon status and type. Therefore, the results suggest that some Pokemon types are more likely to be "Rare" Pokemons. Hence, knowing the value of one variable helps predict the value of the other variable.

# References

- Provide a list of any references you use in the presentation. 